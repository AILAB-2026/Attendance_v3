# Production Environment Configuration
# AI Attend Tracker - Production Settings
# 
# IMPORTANT: 
# - Replace all placeholder values with actual production values
# - Never commit this file with real credentials to version control
# - Keep this file secure and restrict access

# ============================================
# API Configuration
# ============================================

# Production API base URL (used by backend and mobile app)
# Configured for local development with IP access
API_BASE_URL=http://192.168.1.4:7012
EXPO_PUBLIC_API_BASE_URL=http://192.168.1.4:7012
DOMAIN=http://192.168.1.4:7012
EXPO_PUBLIC_DOMAIN=http://192.168.1.4:7012

PORT=3000
HOST=0.0.0.0
SERVER_PORT=7010
EXPO_PUBLIC_SERVER_PORT=7010

# ============================================
# Database Configuration
# ============================================

# PostgreSQL connection string - Master DB (attendance_db)
# Format: postgresql://username:password@host:port/database
# Master DB contains company configuration for multi-company login
DATABASE_URL=postgresql://postgres:pgsql%402025@localhost:5432/attendance_db
DB_HOST=localhost
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=pgsql@2025
DB_NAME=attendance_db

# ============================================
# Security Configuration
# ============================================

# JWT secret for signing tokens
# IMPORTANT: Generate a strong random secret (minimum 32 characters)
# Example: openssl rand -base64 32
JWT_SECRET=change-this-dev-secret

# Enable dev login (external API deprecated)
ALLOW_DEV_LOGIN=false

# Authentication method
PREFERRED_AUTH=db

# Disable verbose login logs in production
BACKEND_VERBOSE_LOGIN=false

# ============================================
# Application Settings
# ============================================

# Login allowed roles (comma-separated)
LOGIN_ALLOWED_ROLES=employee,manager,admin

# Disable demo mode in production
EXPO_PUBLIC_DEMO_MODE=false

# Hide offline banner in production (data syncs automatically)
EXPO_PUBLIC_SHOW_OFFLINE_BANNER=false

# ============================================
# Face Recognition Configuration
# ============================================

# Clock methods settings
BACKEND_ALLOW_FACE=true
BACKEND_ALLOW_BUTTON=true

# Face recognition security settings (Production)
# SECURITY: Strict mode enforces all face verification checks
# - Rejects submissions without a face detected
# - Requires liveness verification (anti-spoofing)
# - Enforces match threshold for authorized users only
# ENABLED: Using local verification with perceptual hashing
FACE_ENFORCE_STRICT=true

# Face verification webhook URL (external AI service)
# This should point to your face recognition AI service
# The service must return: { verified, detectedFace, liveness, matchScore }
# Using attendance_test_api endpoint with enhanced security checks
FACE_VERIFY_WEBHOOK=http://192.168.1.4:7012/facialAuth/verify

# Face match threshold (0.0 to 1.0)
# Higher values = stricter matching (more secure, may reject valid users)
# Lower values = looser matching (less secure, may accept similar faces)
# Recommended: 0.75 for balanced security and usability
FACE_MATCH_THRESHOLD=0.75

# SECURITY: Disable development fallbacks in production
ENABLE_DEV_IMAGE_MATCH=false
FACE_REQUIRE_FOR_BUTTON=false

# Internal face verification endpoint (test processing)
FACE_AI_PROVIDER_URL=http://192.168.1.4:7012/facialAuth/verify

# ============================================
# Business Logic Configuration
# ============================================

# Assignment check enforcement
SKIP_ASSIGNMENT_CHECK=false

# Leave management settings
LEAVE_QUOTA_ENFORCE=true
LEAVE_QUOTA_REQUIRE_ENTITLEMENT=false

# ============================================
# ERP Integration (Optional)
# ============================================

# ERP database URL - now dynamically fetched from attendance_db.companies
# No longer hardcoded - company DB details are retrieved at runtime
# ERP_DATABASE_URL=postgresql://openpg:openpgpwd@192.168.1.4:5432/CX18AI
# ERP sync defaults (if applicable)
# MOBILE_DEFAULT_COMPANY_CODE=COMPANY
# MOBILE_DEFAULT_PASSWORD=default_password
# DEFAULT_EMAIL_DOMAIN=company.com

# ============================================
# Monitoring & Logging (Optional)
# ============================================

# Log level (error, warn, info, debug)
# LOG_LEVEL=info

# Enable performance monitoring
# ENABLE_MONITORING=true

# Sentry DSN for error tracking (if using Sentry)
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# ============================================
# Email Configuration (Optional)
# ============================================

# SMTP settings for email notifications
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_SECURE=false
# SMTP_USER=your-email@gmail.com
# SMTP_PASS=your-app-password
# SMTP_FROM=noreply@ailabtech.com

# ============================================
# Push Notifications (Optional)
# ============================================

# Expo push notification token (if using push notifications)
# EXPO_PUSH_TOKEN=ExponentPushToken[your-token]

# ============================================
# Storage Configuration (Optional)
# ============================================

# File upload settings
# MAX_FILE_SIZE=10485760
# UPLOAD_PATH=C:\AIAttend\uploads

# ============================================
# Rate Limiting (Optional)
# ============================================

# API rate limiting
# RATE_LIMIT_WINDOW_MS=900000
# RATE_LIMIT_MAX_REQUESTS=100

# ============================================
# CORS Configuration (Optional)
# ============================================

# Allowed origins for CORS (comma-separated)
# CORS_ORIGINS=https://api.ailabtech.com,https://admin.ailabtech.com

# ============================================
# Production Checklist
# ============================================
# Before deploying, ensure you have:
# ✓ Changed all CHANGE_THIS_* placeholders
# ✓ Generated a strong JWT_SECRET (minimum 32 characters)
# ✓ Set correct DATABASE_URL with production credentials
# ✓ Verified API_BASE_URL points to production domain
# ✓ Disabled ALLOW_DEV_LOGIN=false
# ✓ Disabled EXPO_PUBLIC_DEMO_MODE=false
# ✓ Set FACE_ENFORCE_STRICT=true (enforce strict face verification)
# ✓ Configured FACE_VERIFY_WEBHOOK with your AI service URL
# ✓ Set appropriate FACE_MATCH_THRESHOLD (recommended: 0.75)
# ✓ Disabled ENABLE_DEV_IMAGE_MATCH=false (no dev fallbacks)
# ✓ Enabled BACKEND_ALLOW_FACE=true
# ✓ Secured this file with proper permissions
# ✓ Never committed this file with real credentials
